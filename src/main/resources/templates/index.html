<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="common/header :: header"/>

<body>

<div th:replace="common/header :: navigation"/>
<div class="p-5">

<div class="row">
<div class="col">
<h2>Planned flights</h2>
</div>
<div class="col ">
    <div class="float-end">
<a class="btn btn-success" href="/createflight">Create new flight</a>
</div>
</div>
</div>




<table class="table table-striped table-hover">
    <thead>
    <tr>
        <th scope="col">Flight number</th>
        <th scope="col">From</th>
        <th scope="col">To</th>
        <th scope="col">Departure time</th>
        <th scope="col">Arrival time</th>
        <th scope="col"></th>

    </tr>
    </thead>
    <tbody>
    <tr th:each="flight : ${flights}">
        <th scope="row" class="align-middle">
            <label th:text="${flight.getConnection().getFlightNumber()}"></label></th>
        <td class="align-middle"><label th:text="${flight.getConnection().getDeparture()}"></label>
        </td>
        <td class="align-middle"><label th:text=" ${flight.getConnection().getDestination()}
        "></label></td>
        <td class="align-middle"><label
                th:text="${#dates.format(flight.getDepartureTime(), 'dd.MM.yyyy hh:mm')}"></label></td>
        <td class="align-middle"><label th:text="${#dates.format(flight.getArrivalTime(), 'dd.MM.yyyy hh:mm')}"></label>
        </td>
        <td class="align-middle">
            <a type="button" class="btn btn-primary" data-bs-toggle="modal"
               th:attr="data-bs-target='#bookModal'+${flight.getFlightID()}">
                Book this flight
            </a>
            <div class="modal fade" tabindex="-1" aria-labelledby="bookModalLabel"
                 aria-hidden="true" th:id="bookModal+${flight.getFlightID()}">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="container-fluid">
                            <form>
                                <div class="modal-header">
                                    <h5 class="modal-title" id="bookModalLabel"><label
                                            th:text="'Book flight '+${flight.getConnection().getFlightNumber()}"></label>
                                    </h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-4">
                                            <h6>Departure time:</h6>
                                        </div>
                                        <div class="col-8">
                                            <label th:text="${#dates.format(flight.getDepartureTime(), 'dd.MM.yyyy hh:mm')}+' at ' +${flight.getConnection().getDeparture()}+' Airport'"></label>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-4">
                                            <h6>Arrival time:</h6>
                                        </div>
                                        <div class="col-8">
                                            <label th:text="${#dates.format(flight.getArrivalTime(), 'dd.MM.yyyy hh:mm')}+' at ' +${flight.getConnection().getDestination()}+' Airport'"></label>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group">
                                            <div class="mb-3">
                                                <label for="select_seats">
                                                    <h6>Select number of seats:</h6></label>
                                                <select class="form-select" aria-label="Default select example"
                                                        id="select_seats">
                                                    <option selected>0</option>
                                                    <option value="1">1</option>
                                                    <option value="2">2</option>
                                                    <option value="3">3</option>
                                                    <option value="4">4</option>
                                                    <option value="5">5</option>
                                                    <option value="6">6</option>
                                                    <option value="7">7</option>
                                                    <option value="8">8</option>
                                                    <option value="9">9</option>
                                                    <option value="10">10</option>
                                                </select>
                                            </div>
                                        </div>


                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                            Close
                                        </button>
                                        <button type="submit" class="btn btn-primary">Book</button>
                                    </div>
                                </div>
                            </form>


                        </div>
                    </div>
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>


</body>
</html>